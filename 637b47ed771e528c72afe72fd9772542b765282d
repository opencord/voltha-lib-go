{
  "comments": [
    {
      "key": {
        "uuid": "2a95764a_c1b06ae1",
        "filename": "pkg/db/kvstore/etcdclient.go",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-01-19T20:56:02Z",
      "side": 1,
      "message": "Out of curiosity, if etcd cannot delete all keys with that prefix, does it return an error and restore the data as it was previously?",
      "revId": "637b47ed771e528c72afe72fd9772542b765282d",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f06d7411_c15a41ed",
        "filename": "pkg/db/kvstore/etcdclient.go",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 1000404
      },
      "writtenOn": "2021-01-19T21:36:17Z",
      "side": 1,
      "message": "No idea. https://etcd.io/docs/v3.3.12/learning/api/#delete-range it says returns the number of keys deleted but doesn\u0027t mention about if any failures occur.",
      "parentUuid": "2a95764a_c1b06ae1",
      "revId": "637b47ed771e528c72afe72fd9772542b765282d",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2802da2_80922a25",
        "filename": "pkg/db/kvstore/etcdclient.go",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-01-21T14:58:38Z",
      "side": 1,
      "message": "This is tricky as the link shows what the Etcd client will receive (a grpc response) but does not explicitly say what the Ectd client will return back in the Delete response.  Is there a way to verify that?  If no errors are returned for partial deletion then that will result in silent errors leading to Etcd growing in size.   If there are no errors returned by the etcd client then getting the number of keys to before deletion may help to check the result back.  Thoughts?",
      "parentUuid": "f06d7411_c15a41ed",
      "revId": "637b47ed771e528c72afe72fd9772542b765282d",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "41d293a9_e6fdbcf6",
        "filename": "pkg/db/kvstore/etcdclient.go",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 1000404
      },
      "writtenOn": "2021-01-30T20:37:32Z",
      "side": 1,
      "message": "Unfortunately I could not find any information how etcd behaves about partial deletion. \nhttps://github.com/etcd-io/etcd/blob/cf2153d44b0eb59e52062c8a59a6ac39d2a4225c/server/proxy/grpcproxy/kv.go#L82 I believe etcd behaves all or nothing.",
      "parentUuid": "a2802da2_80922a25",
      "revId": "637b47ed771e528c72afe72fd9772542b765282d",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e5b9be72_af87988b",
        "filename": "pkg/db/kvstore/etcdclient.go",
        "patchSetId": 3
      },
      "lineNbr": 163,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2021-02-01T14:30:03Z",
      "side": 1,
      "message": "ok, then it\u0027s something we can address if we see this error scenario occurring which will clarify etcd responses.",
      "parentUuid": "41d293a9_e6fdbcf6",
      "revId": "637b47ed771e528c72afe72fd9772542b765282d",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    }
  ]
}