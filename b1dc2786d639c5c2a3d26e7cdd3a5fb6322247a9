{
  "comments": [
    {
      "key": {
        "uuid": "ff5c4c6a_24eb57aa",
        "filename": "pkg/kafka/sarama_client.go",
        "patchSetId": 24
      },
      "lineNbr": 521,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-11-06T21:27:48Z",
      "side": 1,
      "message": "This call will wait for the updateLiveness() to complete before another message is sent out to kafka.   It may be just be negligible.  Another option would be to run updateLiveness() in a separate routine and communicate to it over an internal channel which would be faster.  Is it worth it?",
      "revId": "b1dc2786d639c5c2a3d26e7cdd3a5fb6322247a9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "917b82a7_f139c205",
        "filename": "pkg/kafka/sarama_client.go",
        "patchSetId": 24
      },
      "lineNbr": 521,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2019-11-07T01:30:09Z",
      "side": 1,
      "message": "updateLiveness() does communicate over a channel, and the channel is buffered, so it should not block in the common case. Could you elaborate on your proposed change?",
      "parentUuid": "ff5c4c6a_24eb57aa",
      "revId": "b1dc2786d639c5c2a3d26e7cdd3a5fb6322247a9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "250f8c9d_1aa3d14b",
        "filename": "pkg/kafka/sarama_client.go",
        "patchSetId": 24
      },
      "lineNbr": 521,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-11-07T13:53:37Z",
      "side": 1,
      "message": "I understand that updateLiveness communicates to the probe itself via a channel.   That\u0027s good.   My only concern (may be nitpicking here :)) is that under load we need to be able to send kafka messages as fast as we can.  Now, having to invoke updateLiveness() and wait for it to complete will add a tiny amount of time in between each kafka send message.   My suggestion was instead of invoking updateLiveness() and wait for it to complete, it would be better for updateLiveness() to run in it\u0027s own routine and communicates over a channel (new one) with this code here.  This would mean that right here it will do only \"livenessChnl \u003c- true\".   As i said it is just nitpicking and can be done if we see a performance issue later one.",
      "parentUuid": "917b82a7_f139c205",
      "revId": "b1dc2786d639c5c2a3d26e7cdd3a5fb6322247a9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "451919b1_27b42187",
        "filename": "pkg/kafka/sarama_client.go",
        "patchSetId": 24
      },
      "lineNbr": 521,
      "author": {
        "id": 1000016
      },
      "writtenOn": "2019-11-07T16:14:45Z",
      "side": 1,
      "message": "Thanks Khen, I agree lets keep an eye on the performance.",
      "parentUuid": "250f8c9d_1aa3d14b",
      "revId": "b1dc2786d639c5c2a3d26e7cdd3a5fb6322247a9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    }
  ]
}